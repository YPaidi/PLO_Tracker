<!DOCTYPE html>
<html>
<head>
    <title>Course Selection - CLO & PLO Analysis</title>
    <style>
        .container {
            display: flex;
            justify-content: space-around;
            padding: 20px;
        }
        .courses, .selected-courses, .clo-cognitive, .clo-psychomotor, .clo-affective, .plo-results {
            width: 18%;
            min-height: 300px;
            border: 2px dashed #ccc;
            padding: 10px;
        }
        .course-item {
            padding: 8px;
            margin: 5px;
            background-color: lightblue;
            cursor: grab;
        }
    </style>
</head>
<body>
    <h2>Drag & Drop Course Selection</h2>
    <div class="container">
        <!-- Available Courses -->
        <div class="courses" ondragover="allowDrop(event)" ondrop="dropBack(event)">
            <h3>Available Courses (A-Z)</h3>
            <div class="course-item" draggable="true" ondragstart="drag(event)" id="courseA">Course A</div>
            <div class="course-item" draggable="true" ondragstart="drag(event)" id="courseB">Course B</div>
            <div class="course-item" draggable="true" ondragstart="drag(event)" id="courseC">Course C</div>
        </div>
        
        <!-- Selected Courses -->
        <div class="selected-courses" ondragover="allowDrop(event)" ondrop="drop(event)">
            <h3>Selected Courses</h3>
        </div>
        
        <!-- Achieved CLOs - Cognitive -->
        <div class="clo-cognitive">
            <h3>Cognitive CLOs</h3>
            <ul id="cognitive-list"></ul>
        </div>
        
        <!-- Achieved CLOs - Psychomotor -->
        <div class="clo-psychomotor">
            <h3>Psychomotor CLOs</h3>
            <ul id="psychomotor-list"></ul>
        </div>
        
        <!-- Achieved CLOs - Affective -->
        <div class="clo-affective">
            <h3>Affective CLOs</h3>
            <ul id="affective-list"></ul>
        </div>
        
        <!-- Achieved PLOs -->
        <div class="plo-results">
            <h3>Achieved PLOs</h3>
            <ul id="plo-list"></ul>
        </div>
    </div>
    
    <script>
        let cloMapping = {
            "courseA": {"Cognitive": ["CLOA1"], "Psychomotor": ["CLOA2"], "Affective": ["CLOA3"]},
            "courseB": {"Cognitive": ["CLOB1"], "Psychomotor": ["CLOB2"], "Affective": ["CLOB3"]},
            "courseC": {"Cognitive": ["CLOC1"], "Psychomotor": ["CLOC2"], "Affective": ["CLOC3"]}
        };

        let ploMapping = {
            "CLOA1": "PLO1: Knowledge", "CLOA2": "PLO4: Practical Skills", "CLOA3": "PLO7: Ethical Awareness",
            "CLOB1": "PLO2: Cognitive Skills", "CLOB2": "PLO5: Technical Application", "CLOB3": "PLO8: Teamwork",
            "CLOC1": "PLO3: Analytical Thinking", "CLOC2": "PLO6: Problem Solving", "CLOC3": "PLO9: Leadership"
        };
        
        function allowDrop(event) {
            event.preventDefault();
        }
        
        function drag(event) {
            event.dataTransfer.setData("text", event.target.id);
        }
        
        function drop(event) {
            event.preventDefault();
            let data = event.dataTransfer.getData("text");
            let element = document.getElementById(data);
            if (!document.getElementById("selected-" + data)) {
                let clone = element.cloneNode(true);
                clone.id = "selected-" + data;
                clone.setAttribute("draggable", "true");
                clone.setAttribute("ondragstart", "drag(event)");
                clone.setAttribute("ondblclick", "removeCourse(event)");
                event.target.appendChild(clone);
                displayResults();
            }
        }
        
        function dropBack(event) {
            event.preventDefault();
            let data = event.dataTransfer.getData("text");
            let element = document.getElementById(data);
            if (element && element.parentNode.classList.contains("selected-courses")) {
                element.remove();
                displayResults();
            }
        }
        
        function removeCourse(event) {
            event.target.remove();
            displayResults();
        }
        
        function displayResults() {
            let selectedCourses = document.querySelector(".selected-courses").children;
            let cognitiveList = document.getElementById("cognitive-list");
            let psychomotorList = document.getElementById("psychomotor-list");
            let affectiveList = document.getElementById("affective-list");
            let ploList = document.getElementById("plo-list");
            cognitiveList.innerHTML = "";
            psychomotorList.innerHTML = "";
            affectiveList.innerHTML = "";
            ploList.innerHTML = "";
            let achievedPLOs = new Set();
            
            for (let i = 1; i < selectedCourses.length; i++) {
                let courseId = selectedCourses[i].id.replace("selected-", "");
                if (cloMapping[courseId]) {
                    cloMapping[courseId]["Cognitive"].forEach(clo => {
                        cognitiveList.innerHTML += `<li>${clo}</li>`;
                        if (ploMapping[clo]) achievedPLOs.add(ploMapping[clo]);
                    });
                    cloMapping[courseId]["Psychomotor"].forEach(clo => {
                        psychomotorList.innerHTML += `<li>${clo}</li>`;
                        if (ploMapping[clo]) achievedPLOs.add(ploMapping[clo]);
                    });
                    cloMapping[courseId]["Affective"].forEach(clo => {
                        affectiveList.innerHTML += `<li>${clo}</li>`;
                        if (ploMapping[clo]) achievedPLOs.add(ploMapping[clo]);
                    });
                }
            }
            achievedPLOs.forEach(plo => ploList.innerHTML += `<li>${plo}</li>`);
        }
    </script>
</body>
</html>
